# California Outer SWAN Domain Configuration
# Coarse mesh bridging WW3 data (~25km offshore) to nearshore
# Version: 1.0.0

name: "california_outer"
region: "california"
domain_type: "outer"
version: "1.0.0"
description: "Coarse resolution outer domain covering full California coast"

# Grid specification
grid:
  type: "regular"  # regular | curvilinear | unstructured
  projection: "WGS84"

  # Geographic bounds
  lat_min: 32.0
  lat_max: 41.96396396396379
  lon_min: -126.0
  lon_max: -117.0450450450452

  # Resolution
  resolution_m: 14000
  n_lat: 80
  n_lon: 72

  # Computed cell counts
  n_cells: 5760
  n_wet_cells: 219
  n_dry_cells: 5541

# Mesh versioning - meshes are immutable once created
meshes:
  v1:
    description: "Initial 14km resolution mesh using GEBCO 2024 bathymetry"
    grd_file: "mesh_v1.grd"
    nc_file: "mesh_v1.nc"
    swn_template: "mesh_v1.swn"
    generated_at: "2025-12-26T16:35:30Z"
    bathymetry_sources:
      - "gebco_2024"
    immutable: true
    is_active: true
    quality_metrics:
      wet_cell_percentage: 3.8
      max_depth_m: 4521.3
      mean_depth_m: 892.1

# Currently active mesh
active_mesh: "v1"

# Boundary configuration
boundaries:
  # Source of boundary conditions
  source: "ww3"
  source_description: "NOAA WaveWatch III Global Model"

  # Reference to extraction points (relative to region root)
  extraction_points_ref: "../../boundaries/ww3_extraction_points.json"

  # Offshore distance where boundary is applied
  offshore_boundary_km: 25.0

  # SWAN boundary condition format
  swan_boundary_type: "TPAR"  # TPAR | SPEC2D

  # Spectral configuration (used for SPEC2D or internal SWAN reconstruction)
  spectral_config:
    n_frequencies: 36
    freq_min_hz: 0.04
    freq_max_hz: 1.0
    n_directions: 36
    spreading_degrees: 25.0
    spectral_shape: "JONSWAP"  # JONSWAP | PM (Pierson-Moskowitz)

# SWAN physics settings for outer domain
swan_physics:
  # Wave generation
  generation:
    model: "WESTH"  # Westhuysen wind input
    whitecapping: true

  # Wave breaking (less important for deep water outer domain)
  breaking:
    model: "BKD"  # Battjes-Janssen with variable gamma
    alpha: 1.0
    gamma: 0.73

  # Bottom friction
  friction:
    model: "JONSWAP"
    coefficient: 0.067

  # Triads (shallow water nonlinear interactions)
  triads:
    enabled: false  # Not needed for outer domain (deep water)

  # Quadruplets (deep water nonlinear interactions)
  quadruplets:
    enabled: true

# Output specification
outputs:
  variables:
    - name: "Hsig"
      description: "Significant wave height"
    - name: "TPsmoo"
      description: "Smoothed peak period"
    - name: "Dir"
      description: "Mean wave direction"
    - name: "Depth"
      description: "Water depth"
    - name: "PARTITION"
      description: "Swell partitions (wind sea + 6 swell components)"
  partition_count: 6
  format: "LAY3"  # SWAN binary format

# Notes
notes:
  - "This outer domain feeds boundary conditions to inner nested domains"
  - "Resolution is intentionally coarse to match WW3 native resolution"
  - "Mesh v1 was generated from GEBCO 2024 bathymetry"
